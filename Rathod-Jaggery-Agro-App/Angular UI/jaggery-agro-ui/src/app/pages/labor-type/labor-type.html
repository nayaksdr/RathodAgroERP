<div class="labor-type container-fluid py-4">

  <!-- ================= HEADER ================= -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="p-4 bg-white shadow-sm rounded-4 border">
        <div class="d-flex align-items-center justify-content-between">
          <div>
            <h3 class="fw-bold mb-1 d-flex align-items-center gap-2">
              <mat-icon class="text-primary">groups</mat-icon>
              Labor Type Management
            </h3>
            <small class="text-muted">
              Add, update and manage labor categories efficiently
            </small>
          </div>
          <span class="badge bg-primary fs-6 px-3 py-2">
           {{ laborTypes.length || 0 }} Records

          </span>
        </div>
      </div>
    </div>
  </div>

  <!-- ================= FORM CARD ================= -->
  <div class="row mb-4">
    <div class="col-lg-6">
      <div class="card shadow-sm border-0 rounded-4">
        <div class="card-body p-4">

          <h5 class="fw-semibold mb-4 d-flex align-items-center gap-2">
            <mat-icon color="primary">
              {{ model.id ? 'edit' : 'add_circle' }}
            </mat-icon>
            {{ model.id ? 'Update Labor Type' : 'Add New Labor Type' }}
          </h5>

          <form (ngSubmit)="save()" #form="ngForm">

            <!-- Name -->
            <div class="mb-3">
              <label class="form-label fw-semibold">
                <mat-icon class="me-1 text-secondary">badge</mat-icon>
                Labor Type Name
              </label>
              <input
                type="text"
                class="form-control rounded-3"
                [(ngModel)]="model.laborTypeName"
                name="laborTypeName"
                required>
            </div>

            <!-- Description -->
            <div class="mb-3">
              <label class="form-label fw-semibold">
                <mat-icon class="me-1 text-secondary">description</mat-icon>
                Description
              </label>
              <input
                type="text"
                class="form-control rounded-3"
                [(ngModel)]="model.description"
                name="description">
            </div>

            <!-- Buttons -->
            <div class="d-flex gap-2 mt-4">

              <button
                type="submit"
                class="btn btn-primary px-4 rounded-3 shadow-sm">
                <mat-icon class="me-1">
                  {{ model.id ? 'update' : 'save' }}
                </mat-icon>
                {{ model.id ? 'Update' : 'Save' }}
              </button>

              <button
                type="button"
                class="btn btn-outline-secondary rounded-3"
                (click)="clear()">
                <mat-icon class="me-1">clear</mat-icon>
                Clear
              </button>

            </div>

          </form>

        </div>
      </div>
    </div>
  </div>

  <!-- ================= TABLE ================= -->
  <div class="row">
    <div class="col-12">
      <div class="card shadow-sm border-0 rounded-4">
        <div class="card-body p-4">

          <!-- Table Header -->
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="fw-semibold mb-0 d-flex align-items-center gap-2">
              <mat-icon class="text-success">list_alt</mat-icon>
              Labor Types List
            </h5>

            <div class="input-group w-25">
              <span class="input-group-text bg-light">
                <mat-icon>search</mat-icon>
              </span>
              <input
                type="text"
                class="form-control"
                placeholder="Search..."
                [(ngModel)]="searchText"
                (input)="applyFilter()">
            </div>
          </div>

          <!-- Responsive Table -->
          <div class="table-responsive">
            <table class="table table-hover align-middle">

              <thead class="table-light">
                <tr>
                  <th>
                    <mat-icon class="me-1 text-secondary">badge</mat-icon>
                    Labor Type
                  </th>
                  <th>
                    <mat-icon class="me-1 text-secondary">description</mat-icon>
                    Description
                  </th>
                  <th class="text-center">
                    <mat-icon class="me-1 text-secondary">settings</mat-icon>
                    Actions
                  </th>
                </tr>
              </thead>

              <tbody>
                <tr *ngFor="let row of paginatedData">

                  <td class="fw-medium">
                    {{ row.laborTypeName }}
                  </td>

                  <td class="text-muted">
                    {{ row.description || '-' }}
                  </td>

                  <td class="text-center">

                    <button
                      class="btn btn-sm btn-outline-primary me-2 rounded-pill"
                      (click)="edit(row)">
                      <mat-icon>edit</mat-icon>
                    </button>

                    <button
                      class="btn btn-sm btn-outline-danger rounded-pill"
                      (click)="confirmDelete(row)">
                      <mat-icon>delete</mat-icon>
                    </button>

                  </td>

                </tr>
              </tbody>

            </table>
          </div>

          <!-- Pagination -->
          <div
            class="d-flex justify-content-center mt-3"
            *ngIf="totalPages > 1">

            <nav>
              <ul class="pagination">

                <li class="page-item"
                    [class.disabled]="currentPage === 1">
                  <button class="page-link"
                          (click)="prevPage()">
                    Previous
                  </button>
                </li>

                <li class="page-item"
                    *ngFor="let p of totalPagesArray"
                    [class.active]="p === currentPage">
                  <button class="page-link"
                          (click)="goToPage(p)">
                    {{ p }}
                  </button>
                </li>

                <li class="page-item"
                    [class.disabled]="currentPage === totalPages">
                  <button class="page-link"
                          (click)="nextPage()">
                    Next
                  </button>
                </li>

              </ul>
            </nav>

          </div>

        </div>
      </div>
    </div>
  </div>

</div>
