@using Microsoft.AspNetCore.Mvc.Localization
@model IEnumerable<JaggeryAgro.Core.Entities.LaborTypeRate>
@inject IViewLocalizer Localizer

@{
    ViewData["Title"] = Localizer["Title"];
}

<div class="container mt-5">

    <!-- Page Header -->
    <div class="d-flex flex-column flex-md-row justify-content-between align-items-center mb-4">
        <h2 class="fw-bold text-white bg-dark px-4 py-2 rounded-3 shadow mb-3 mb-md-0">
            @Localizer["Title"]
        </h2>
        <a asp-action="Create" class="btn btn-success btn-lg shadow-sm rounded-pill">
            <i class="bi bi-plus-lg me-2"></i> @Localizer["Button_AddNew"]
        </a>
    </div>

    <!-- Table -->
    <div class="table-responsive shadow-sm rounded-3">
        <table class="table table-bordered table-hover align-middle table-orange-header" id="LaborTypeRateTable">
            <thead class="table-dark">
                <tr>
                    <th>@Localizer["Table_LaborType"]</th>
                    <th>@Localizer["Table_Rate"]</th>
                    <th>@Localizer["Table_EffectiveFrom"]</th>
                    <th style="width: 150px;">@Localizer["Table_Actions"]</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var rate in Model)
                {
                    <tr>
                        <td>@rate.LaborType?.LaborTypeName</td>

                        <td>
                            @if (rate.LaborType?.LaborTypeName == "ऊस तोड कामगार")
                            {
                                <span>₹ @rate.DailyRate <small class="text-muted">@Localizer["Rate_PerTon"]</small></span>
                            }
                            else if (rate.LaborType?.LaborTypeName == "गुळ तयार करणारा कामगार")
                            {
                                <span>₹ @rate.DailyRate <small class="text-muted">@Localizer["Rate_PerJaggery"]</small></span>
                            }
                            else
                            {
                                <span>₹ @rate.DailyRate <small class="text-muted">@Localizer["Rate_Daily"]</small></span>
                            }
                        </td>

                        <td>@rate.EffectiveFrom.ToString("dd/MM/yyyy")</td>

                        <td class="text-center">
                            <a asp-action="Edit" asp-route-id="@rate.Id" class="btn btn-warning btn-sm me-1 shadow-sm rounded-pill">
                                <i class="bi bi-pencil-square"></i>
                            </a>
                            <a asp-action="Delete" asp-route-id="@rate.Id"
                               class="btn btn-danger btn-sm shadow-sm rounded-pill"
                               onclick="return confirm('@Localizer["Confirm_Delete"]');">
                                <i class="bi bi-trash"></i>
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            $('#LaborTypeRateTable').DataTable({
                responsive: true,
                paging: true,
                searching: true,
                ordering: true,
                pageLength: 5,
                language: {
                    search: "@Localizer["Search"]",
                    lengthMenu: "_MENU_ @Localizer["Records_Show"]",
                    info: "_START_ to _END_ of _TOTAL_ @Localizer["Records_Shown"]",
                    paginate: { next: "@Localizer["Next"]", previous: "@Localizer["Previous"]" }
                }
            });
        });
    </script>
}
